"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/common/http");
require("rxjs/add/operator/map");
var http_utils_1 = require("../shared/utils/http-utils");
var tarjetas_interface_1 = require("../services/interfaces/tarjetas.interface");
var tarjeta_movtos_interface_1 = require("./interfaces/tarjeta-movtos.interface");
var TarjetasService = /** @class */ (function () {
    function TarjetasService(http) {
        this.http = http;
        this.baseUrl = http_utils_1.HttpUtils.getWsUrl();
    }
    TarjetasService.prototype.obtenerTarjetas = function (encryptedSecuencia) {
        var _this = this;
        var url = this.baseUrl + "/GET_TC";
        var headers = http_utils_1.HttpUtils.createRequestHeaderPost();
        var formData = new FormData();
        formData.append('PSECUENCIA', encryptedSecuencia);
        //console.log(url, "-", formData);
        return this.http.post(url, formData, { headers: headers, responseType: "json" })
            .map(function (res) {
            //console.log("obtenerTarjetas", JSON.stringify(res));
            var tarjetas = _this.transformaTarjetas(res);
            return tarjetas;
        });
    };
    TarjetasService.prototype.transformaTarjetas = function (res) {
        var _this = this;
        var tarjetas = [];
        var arr = res["NewDataSet"]["Table"];
        if (Array.isArray(arr)) {
            // La respuesta es un array (Varias tarjetas).
            arr.forEach(function (objeto) {
                tarjetas.push(_this.creaTarjeta(objeto));
            });
        }
        else {
            // La respuesta es un objeto (una sola tarjeta).
            tarjetas.push(this.creaTarjeta(arr));
        }
        return tarjetas;
    };
    TarjetasService.prototype.creaTarjeta = function (objeto) {
        var tarjeta = new tarjetas_interface_1.Tarjeta();
        tarjeta.numTarjeta = objeto["NUM_TARJETA"];
        tarjeta.pseudonimo = objeto["PSEUDONIMO"];
        tarjeta.producto = objeto["PRODUCTO"];
        tarjeta.saldo = objeto["SALDO"];
        tarjeta.disponible = objeto["DISPONIBLE"];
        tarjeta.tipoTC = objeto["TIPO_TC"];
        tarjeta.numCuenta = objeto["NUM_CTA_CREDITO"];
        //console.log(tarjeta.numTarjeta); 
        return tarjeta;
    };
    TarjetasService.prototype.obtenerMovtosTarjeta = function (encryptedSecuencia, encryptedNumCta, numTarjeta, tipoMovtos) {
        var _this = this;
        var servicio = (tipoMovtos == "Corrientes") ? "GET_TC_MOV" : (tipoMovtos == "Flotantes") ? "GET_TC_HOLD" : "GET_TC_HEADER";
        var url = this.baseUrl + "/" + servicio;
        var headers = http_utils_1.HttpUtils.createRequestHeaderPost();
        var formData = new FormData();
        formData.append('PSECUENCIA', encryptedSecuencia);
        formData.append('PNUM_CTA_CREDITO', encryptedNumCta);
        //formData.append((tipoMovtos=="Flotantes")?'PTARJETA':'PNUM_TC', numTarjeta);
        formData.append('PNUM_TC', numTarjeta);
        console.log(url + "\n" + encryptedSecuencia, encryptedNumCta, numTarjeta);
        return this.http.post(url, formData, { headers: headers, responseType: "json" })
            .map(function (res) {
            console.log("obtenerMovtosTarjeta", JSON.stringify(res));
            var movtos;
            if (tipoMovtos == "Corrientes") {
                movtos = _this.transformaMovtosCorrientes(res);
            }
            else if (tipoMovtos == "Flotantes") {
                movtos = _this.transformaMovtosFlotantes(res);
            }
            else {
                movtos = _this.transformaMovtosResumen(res);
            }
            return movtos;
        });
    };
    TarjetasService.prototype.transformaMovtosCorrientes = function (res) {
        var _this = this;
        var movtos = [];
        if (res["NewDataSet"] != null) {
            var obj = res["NewDataSet"]["Table"];
            if (Array.isArray(obj)) {
                obj.forEach(function (element) {
                    movtos.push(_this.creaMovtoCorriente(element));
                });
            }
            else {
                movtos.push(this.creaMovtoCorriente(obj));
            }
        }
        return movtos;
    };
    TarjetasService.prototype.creaMovtoCorriente = function (objeto) {
        var movto = new tarjeta_movtos_interface_1.MovtoCorriente();
        movto.fechaMov = objeto["XFEC_COMPRA"];
        movto.fechaPosteo = objeto["XFEC_POSTEO"];
        movto.descripcion = objeto["XDESC_MOV"];
        movto.monto = objeto["XMON_MOV"];
        movto.referencia = objeto["XREF_INTER"];
        movto.tc = objeto["XTC"];
        return movto;
    };
    TarjetasService.prototype.transformaMovtosFlotantes = function (res) {
        var _this = this;
        var movtos = [];
        if (res["NewDataSet"] != null) {
            var obj = res["NewDataSet"]["Table"];
            if (Array.isArray(obj)) {
                obj.forEach(function (element) {
                    movtos.push(_this.creaMovtoFlotante(element));
                });
            }
            else {
                movtos.push(this.creaMovtoFlotante(obj));
            }
        }
        return movtos;
    };
    TarjetasService.prototype.creaMovtoFlotante = function (objeto) {
        var movto = new tarjeta_movtos_interface_1.MovtoFlotante();
        movto.fechaMov = objeto["FECHA"];
        movto.descripcion = objeto["DESCRIPCION"];
        movto.monto = objeto["MONTO"];
        movto.tc = objeto["TARJETA"];
        return movto;
    };
    TarjetasService.prototype.transformaMovtosResumen = function (res) {
        var movtos = [];
        // En este caso, se espera un objeto.
        var objeto = res["NewDataSet"]["Table"];
        var movto = new tarjeta_movtos_interface_1.MovtoResumen();
        movto.nombre = objeto["NOMBRE"];
        movto.fechaCorte = objeto["FECHA_CORTE"];
        movto.numCuenta = objeto["NUM_CUENTA"];
        movto.fechaPagoContado = objeto["FECHA_PAGO_CONTADO"];
        movto.pagoContado = objeto["PAGO_CONTADO"];
        movto.status = objeto["ESTADO"];
        movto.fechaPagoMinimo = objeto["FECHA_PAGO_MINIMO"];
        movto.tipoTarjeta = objeto["TIPO_TARJETA"];
        movto.balanceAnterior = objeto["BALANCE_ANTERIOR"];
        movto.fechaVencimiento = objeto["FECHA_VENCIMIENTO"];
        movto.comprasRetiros = objeto["CONSUMOS_COMP_RET"];
        movto.cargosVarios = objeto["CARGOS_VARIOS"];
        movto.cargosFinancieros = objeto["CARGOS_X_FINAN"];
        movto.limiteCredito = objeto["LIMITE_CREDITO"];
        movto.pagosCreditos = objeto["PAGOS_CREDITOS"];
        movto.saldoActual = objeto["SALDO_ACTUAL"];
        movto.saldoAlCorte = objeto["SALDO_CORTE"];
        movto.flotes = objeto["FLOTES"];
        movto.pagoMinimo = objeto["PAGO_MINIMO"];
        movto.creditoDisponible = objeto["CREDITO_DISPONIBLE"];
        movto.puntosPromerica = objeto["PUNTOS_PROMERICA"];
        movto.sobregiro = objeto["SOBREGIRO"];
        movto.financiamiento = objeto["FINANCIAMIENTO"];
        movto.numTjtasAdicionales = objeto["NUM_TARJETAS_ADICIONALES"];
        movtos.push(movto);
        //console.log("FechaPagoConatdo:",objeto["FECHA_PAGO_CONTADO"]);
        return movtos;
    };
    TarjetasService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], TarjetasService);
    return TarjetasService;
}());
exports.TarjetasService = TarjetasService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyamV0YXMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRhcmpldGFzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMkM7QUFDM0MsNkNBQWtEO0FBQ2xELGlDQUErQjtBQUUvQix5REFBdUQ7QUFFdkQsZ0ZBQW9FO0FBQ3BFLGtGQUFvRztBQUdwRztJQUtFLHlCQUFvQixJQUFpQjtRQUFqQixTQUFJLEdBQUosSUFBSSxDQUFhO1FBSDdCLFlBQU8sR0FBWSxzQkFBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBSWhELENBQUM7SUFFRCx5Q0FBZSxHQUFmLFVBQWdCLGtCQUFrQjtRQUFsQyxpQkFZQztRQVhDLElBQUksR0FBRyxHQUFlLElBQUksQ0FBQyxPQUFPLFlBQVMsQ0FBQztRQUM1QyxJQUFJLE9BQU8sR0FBRyxzQkFBUyxDQUFDLHVCQUF1QixFQUFFLENBQUM7UUFDbEQsSUFBSSxRQUFRLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUM5QixRQUFRLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2xELGtDQUFrQztRQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxFQUFDLE9BQU8sRUFBQyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sRUFBQyxDQUFDO2FBQzFFLEdBQUcsQ0FBRSxVQUFDLEdBQUc7WUFDUixzREFBc0Q7WUFDdEQsSUFBSSxRQUFRLEdBQWUsS0FBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDbEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU8sNENBQWtCLEdBQTFCLFVBQTJCLEdBQVU7UUFBckMsaUJBYUM7UUFaQyxJQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbEIsSUFBSSxHQUFHLEdBQWdC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LENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsZ0VBQWdFO1FBQ2hFLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQTlKVSxlQUFlO1FBRDNCLGlCQUFVLEVBQUU7eUNBTWdCLGlCQUFVO09BTDFCLGVBQWUsQ0FpSzNCO0lBQUQsc0JBQUM7Q0FBQSxBQWpLRCxJQWlLQztBQWpLWSwwQ0FBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCI7XHJcbmltcG9ydCBcInJ4anMvYWRkL29wZXJhdG9yL21hcFwiO1xyXG5cclxuaW1wb3J0IHsgSHR0cFV0aWxzIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlscy9odHRwLXV0aWxzXCI7XHJcblxyXG5pbXBvcnQgeyBUYXJqZXRhIH0gZnJvbSBcIi4uL3NlcnZpY2VzL2ludGVyZmFjZXMvdGFyamV0YXMuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IE1vdnRvQ29ycmllbnRlLCBNb3Z0b0Zsb3RhbnRlLCBNb3Z0b1Jlc3VtZW4gfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3RhcmpldGEtbW92dG9zLmludGVyZmFjZVwiO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgVGFyamV0YXNTZXJ2aWNlIHtcclxuIFxyXG4gIHByaXZhdGUgYmFzZVVybCA6IHN0cmluZyA9IEh0dHBVdGlscy5nZXRXc1VybCgpO1xyXG5cclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwIDogSHR0cENsaWVudCkgeyBcclxuICB9XHJcblxyXG4gIG9idGVuZXJUYXJqZXRhcyhlbmNyeXB0ZWRTZWN1ZW5jaWEpIHtcclxuICAgIGxldCB1cmwgOiBzdHJpbmcgPSBgJHt0aGlzLmJhc2VVcmx9L0dFVF9UQ2A7XHJcbiAgICBsZXQgaGVhZGVycyA9IEh0dHBVdGlscy5jcmVhdGVSZXF1ZXN0SGVhZGVyUG9zdCgpO1xyXG4gICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ1BTRUNVRU5DSUEnLCBlbmNyeXB0ZWRTZWN1ZW5jaWEpO1xyXG4gICAgLy9jb25zb2xlLmxvZyh1cmwsIFwiLVwiLCBmb3JtRGF0YSk7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBmb3JtRGF0YSwge2hlYWRlcnM6aGVhZGVycyxyZXNwb25zZVR5cGU6XCJqc29uXCJ9KVxyXG4gICAgLm1hcCggKHJlcykgPT4geyBcclxuICAgICAgLy9jb25zb2xlLmxvZyhcIm9idGVuZXJUYXJqZXRhc1wiLCBKU09OLnN0cmluZ2lmeShyZXMpKTtcclxuICAgICAgbGV0IHRhcmpldGFzIDogVGFyamV0YVtdID0gdGhpcy50cmFuc2Zvcm1hVGFyamV0YXMocmVzKTtcclxuICAgICAgcmV0dXJuIHRhcmpldGFzO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRyYW5zZm9ybWFUYXJqZXRhcyhyZXM6T2JqZWN0KTpUYXJqZXRhW117XHJcbiAgICBsZXQgdGFyamV0YXMgPSBbXTtcclxuICAgIGxldCBhcnIgOiBBcnJheTxhbnk+ID0gcmVzW1wiTmV3RGF0YVNldFwiXVtcIlRhYmxlXCJdO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xyXG4gICAgICAvLyBMYSByZXNwdWVzdGEgZXMgdW4gYXJyYXkgKFZhcmlhcyB0YXJqZXRhcykuXHJcbiAgICAgIGFyci5mb3JFYWNoKCAob2JqZXRvKSA9PiB7XHJcbiAgICAgICAgdGFyamV0YXMucHVzaCh0aGlzLmNyZWFUYXJqZXRhKG9iamV0bykpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIExhIHJlc3B1ZXN0YSBlcyB1biBvYmpldG8gKHVuYSBzb2xhIHRhcmpldGEpLlxyXG4gICAgICB0YXJqZXRhcy5wdXNoKHRoaXMuY3JlYVRhcmpldGEoYXJyKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyamV0YXM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWFUYXJqZXRhKG9iamV0byA6IE9iamVjdCkgOiBUYXJqZXRhIHtcclxuICAgIGxldCB0YXJqZXRhOlRhcmpldGEgPSBuZXcgVGFyamV0YSgpO1xyXG4gICAgdGFyamV0YS5udW1UYXJqZXRhICAgICAgPSBvYmpldG9bXCJOVU1fVEFSSkVUQVwiXTtcclxuICAgIHRhcmpldGEucHNldWRvbmltbyAgICAgID0gb2JqZXRvW1wiUFNFVURPTklNT1wiXTtcclxuICAgIHRhcmpldGEucHJvZHVjdG8gICAgICAgID0gb2JqZXRvW1wiUFJPRFVDVE9cIl07XHJcbiAgICB0YXJqZXRhLnNhbGRvICAgICAgICAgICA9IG9iamV0b1tcIlNBTERPXCJdO1xyXG4gICAgdGFyamV0YS5kaXNwb25pYmxlICAgICAgPSBvYmpldG9bXCJESVNQT05JQkxFXCJdO1xyXG4gICAgdGFyamV0YS50aXBvVEMgICAgICAgICAgPSBvYmpldG9bXCJUSVBPX1RDXCJdO1xyXG4gICAgdGFyamV0YS5udW1DdWVudGEgICAgICAgPSBvYmpldG9bXCJOVU1fQ1RBX0NSRURJVE9cIl07XHJcbiAgICAvL2NvbnNvbGUubG9nKHRhcmpldGEubnVtVGFyamV0YSk7IFxyXG4gICAgcmV0dXJuIHRhcmpldGE7XHJcbiAgfVxyXG5cclxuXHJcbiAgb2J0ZW5lck1vdnRvc1RhcmpldGEoZW5jcnlwdGVkU2VjdWVuY2lhLCBlbmNyeXB0ZWROdW1DdGEsIG51bVRhcmpldGE6c3RyaW5nLCB0aXBvTW92dG9zOnN0cmluZykge1xyXG4gICAgbGV0IHNlcnZpY2lvOiBzdHJpbmcgPSAodGlwb01vdnRvcz09XCJDb3JyaWVudGVzXCIpID8gXCJHRVRfVENfTU9WXCIgOiAodGlwb01vdnRvcz09XCJGbG90YW50ZXNcIikgPyBcIkdFVF9UQ19IT0xEXCIgOiBcIkdFVF9UQ19IRUFERVJcIjtcclxuICAgIGxldCB1cmwgOiBzdHJpbmcgPSBgJHt0aGlzLmJhc2VVcmx9LyR7c2VydmljaW99YDtcclxuICAgIGxldCBoZWFkZXJzID0gSHR0cFV0aWxzLmNyZWF0ZVJlcXVlc3RIZWFkZXJQb3N0KCk7XHJcbiAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnUFNFQ1VFTkNJQScsIGVuY3J5cHRlZFNlY3VlbmNpYSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ1BOVU1fQ1RBX0NSRURJVE8nLCBlbmNyeXB0ZWROdW1DdGEpO1xyXG4gICAgLy9mb3JtRGF0YS5hcHBlbmQoKHRpcG9Nb3Z0b3M9PVwiRmxvdGFudGVzXCIpPydQVEFSSkVUQSc6J1BOVU1fVEMnLCBudW1UYXJqZXRhKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnUE5VTV9UQycsIG51bVRhcmpldGEpO1xyXG4gICAgY29uc29sZS5sb2codXJsK1wiXFxuXCIrZW5jcnlwdGVkU2VjdWVuY2lhLCBlbmNyeXB0ZWROdW1DdGEsIG51bVRhcmpldGEpO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgZm9ybURhdGEsIHtoZWFkZXJzOmhlYWRlcnMscmVzcG9uc2VUeXBlOlwianNvblwifSlcclxuICAgIC5tYXAoIChyZXMpID0+IHsgXHJcbiAgICAgIGNvbnNvbGUubG9nKFwib2J0ZW5lck1vdnRvc1RhcmpldGFcIiwgSlNPTi5zdHJpbmdpZnkocmVzKSk7XHJcbiAgICAgIGxldCBtb3Z0b3MgOiBhbnlbXTtcclxuICAgICAgaWYgKHRpcG9Nb3Z0b3M9PVwiQ29ycmllbnRlc1wiKSB7XHJcbiAgICAgICAgbW92dG9zID0gdGhpcy50cmFuc2Zvcm1hTW92dG9zQ29ycmllbnRlcyhyZXMpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRpcG9Nb3Z0b3M9PVwiRmxvdGFudGVzXCIpIHtcclxuICAgICAgICBtb3Z0b3MgPSB0aGlzLnRyYW5zZm9ybWFNb3Z0b3NGbG90YW50ZXMocmVzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtb3Z0b3MgPSB0aGlzLnRyYW5zZm9ybWFNb3Z0b3NSZXN1bWVuKHJlcyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG1vdnRvcztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0cmFuc2Zvcm1hTW92dG9zQ29ycmllbnRlcyhyZXM6T2JqZWN0KSA6IE1vdnRvQ29ycmllbnRlW10ge1xyXG4gICAgbGV0IG1vdnRvcyA9IFtdO1xyXG4gICAgaWYgKHJlc1tcIk5ld0RhdGFTZXRcIl0gIT0gbnVsbCkge1xyXG4gICAgICBsZXQgb2JqIDogQXJyYXk8YW55PiA9IHJlc1tcIk5ld0RhdGFTZXRcIl1bXCJUYWJsZVwiXTtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgeyAgLy8gTGEgcmVzcHVlc3RhIGVzIHVuIGFycmF5IChWYXJpb3MgbW92aW1pZW50b3MpLlxyXG4gICAgICAgIG9iai5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgbW92dG9zLnB1c2godGhpcy5jcmVhTW92dG9Db3JyaWVudGUoZWxlbWVudCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgeyAvLyBFcyB1biBzb2xvIG1vdnRvLlxyXG4gICAgICAgIG1vdnRvcy5wdXNoKHRoaXMuY3JlYU1vdnRvQ29ycmllbnRlKG9iaikpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbW92dG9zO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhTW92dG9Db3JyaWVudGUob2JqZXRvKXtcclxuICAgIGxldCBtb3Z0bzogTW92dG9Db3JyaWVudGUgPSBuZXcgTW92dG9Db3JyaWVudGUoKTtcclxuICAgIG1vdnRvLmZlY2hhTW92ICAgID0gb2JqZXRvW1wiWEZFQ19DT01QUkFcIl07XHJcbiAgICBtb3Z0by5mZWNoYVBvc3RlbyA9IG9iamV0b1tcIlhGRUNfUE9TVEVPXCJdXHJcbiAgICBtb3Z0by5kZXNjcmlwY2lvbiA9IG9iamV0b1tcIlhERVNDX01PVlwiXTtcclxuICAgIG1vdnRvLm1vbnRvICAgICAgID0gb2JqZXRvW1wiWE1PTl9NT1ZcIl07XHJcbiAgICBtb3Z0by5yZWZlcmVuY2lhICA9IG9iamV0b1tcIlhSRUZfSU5URVJcIl07XHJcbiAgICBtb3Z0by50YyAgICAgICAgICA9IG9iamV0b1tcIlhUQ1wiXTtcclxuICAgIHJldHVybiBtb3Z0bztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJhbnNmb3JtYU1vdnRvc0Zsb3RhbnRlcyhyZXM6T2JqZWN0KSA6IE1vdnRvRmxvdGFudGVbXSB7XHJcbiAgICBsZXQgbW92dG9zID0gW107XHJcbiAgICBpZiAocmVzW1wiTmV3RGF0YVNldFwiXSAhPSBudWxsKSB7XHJcbiAgICAgIGxldCBvYmogOiBBcnJheTxhbnk+ID0gcmVzW1wiTmV3RGF0YVNldFwiXVtcIlRhYmxlXCJdO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7ICAvLyBMYSByZXNwdWVzdGEgZXMgdW4gYXJyYXkgKFZhcmlvcyBtb3ZpbWllbnRvcykuXHJcbiAgICAgICAgb2JqLmZvckVhY2goIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBtb3Z0b3MucHVzaCh0aGlzLmNyZWFNb3Z0b0Zsb3RhbnRlKGVsZW1lbnQpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHsgLy8gRXMgdW4gc29sbyBtb3Z0by5cclxuICAgICAgICBtb3Z0b3MucHVzaCh0aGlzLmNyZWFNb3Z0b0Zsb3RhbnRlKG9iaikpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbW92dG9zO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhTW92dG9GbG90YW50ZShvYmpldG8pe1xyXG4gICAgbGV0IG1vdnRvOiBNb3Z0b0Zsb3RhbnRlID0gbmV3IE1vdnRvRmxvdGFudGUoKTtcclxuICAgIG1vdnRvLmZlY2hhTW92ICAgID0gb2JqZXRvW1wiRkVDSEFcIl07XHJcbiAgICBtb3Z0by5kZXNjcmlwY2lvbiA9IG9iamV0b1tcIkRFU0NSSVBDSU9OXCJdO1xyXG4gICAgbW92dG8ubW9udG8gICAgICAgPSBvYmpldG9bXCJNT05UT1wiXTtcclxuICAgIG1vdnRvLnRjICAgICAgICAgID0gb2JqZXRvW1wiVEFSSkVUQVwiXTtcclxuICAgIHJldHVybiBtb3Z0bztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJhbnNmb3JtYU1vdnRvc1Jlc3VtZW4ocmVzOk9iamVjdCkgOiBNb3Z0b1Jlc3VtZW5bXSB7XHJcbiAgICBsZXQgbW92dG9zID0gW107XHJcbiAgICAvLyBFbiBlc3RlIGNhc28sIHNlIGVzcGVyYSB1biBvYmpldG8uXHJcbiAgICBsZXQgb2JqZXRvOk9iamVjdCA9IHJlc1tcIk5ld0RhdGFTZXRcIl1bXCJUYWJsZVwiXTtcclxuICAgIGxldCBtb3Z0byA6IE1vdnRvUmVzdW1lbiA9IG5ldyBNb3Z0b1Jlc3VtZW4oKTtcclxuICAgIG1vdnRvLm5vbWJyZSAgICAgICAgICAgICAgPSBvYmpldG9bXCJOT01CUkVcIl07XHJcbiAgICBtb3Z0by5mZWNoYUNvcnRlICAgICAgICAgID0gb2JqZXRvW1wiRkVDSEFfQ09SVEVcIl07XHJcbiAgICBtb3Z0by5udW1DdWVudGEgICAgICAgICAgID0gb2JqZXRvW1wiTlVNX0NVRU5UQVwiXTtcclxuICAgIG1vdnRvLmZlY2hhUGFnb0NvbnRhZG8gICAgPSBvYmpldG9bXCJGRUNIQV9QQUdPX0NPTlRBRE9cIl07XHJcbiAgICBtb3Z0by5wYWdvQ29udGFkbyAgICAgICAgID0gb2JqZXRvW1wiUEFHT19DT05UQURPXCJdO1xyXG4gICAgbW92dG8uc3RhdHVzICAgICAgICAgICAgICA9IG9iamV0b1tcIkVTVEFET1wiXTtcclxuICAgIG1vdnRvLmZlY2hhUGFnb01pbmltbyAgICAgPSBvYmpldG9bXCJGRUNIQV9QQUdPX01JTklNT1wiXTtcclxuICAgIG1vdnRvLnRpcG9UYXJqZXRhICAgICAgICAgPSBvYmpldG9bXCJUSVBPX1RBUkpFVEFcIl07XHJcbiAgICBtb3Z0by5iYWxhbmNlQW50ZXJpb3IgICAgID0gb2JqZXRvW1wiQkFMQU5DRV9BTlRFUklPUlwiXTtcclxuICAgIG1vdnRvLmZlY2hhVmVuY2ltaWVudG8gICAgPSBvYmpldG9bXCJGRUNIQV9WRU5DSU1JRU5UT1wiXTtcclxuICAgIG1vdnRvLmNvbXByYXNSZXRpcm9zICAgICAgPSBvYmpldG9bXCJDT05TVU1PU19DT01QX1JFVFwiXTtcclxuICAgIG1vdnRvLmNhcmdvc1ZhcmlvcyAgICAgICAgPSBvYmpldG9bXCJDQVJHT1NfVkFSSU9TXCJdO1xyXG4gICAgbW92dG8uY2FyZ29zRmluYW5jaWVyb3MgICA9IG9iamV0b1tcIkNBUkdPU19YX0ZJTkFOXCJdO1xyXG4gICAgbW92dG8ubGltaXRlQ3JlZGl0byAgICAgICA9IG9iamV0b1tcIkxJTUlURV9DUkVESVRPXCJdO1xyXG4gICAgbW92dG8ucGFnb3NDcmVkaXRvcyAgICAgICA9IG9iamV0b1tcIlBBR09TX0NSRURJVE9TXCJdO1xyXG4gICAgbW92dG8uc2FsZG9BY3R1YWwgICAgICAgICA9IG9iamV0b1tcIlNBTERPX0FDVFVBTFwiXTtcclxuICAgIG1vdnRvLnNhbGRvQWxDb3J0ZSAgICAgICAgPSBvYmpldG9bXCJTQUxET19DT1JURVwiXTtcclxuICAgIG1vdnRvLmZsb3RlcyAgICAgICAgICAgICAgPSBvYmpldG9bXCJGTE9URVNcIl07XHJcbiAgICBtb3Z0by5wYWdvTWluaW1vICAgICAgICAgID0gb2JqZXRvW1wiUEFHT19NSU5JTU9cIl07XHJcbiAgICBtb3Z0by5jcmVkaXRvRGlzcG9uaWJsZSAgID0gb2JqZXRvW1wiQ1JFRElUT19ESVNQT05JQkxFXCJdO1xyXG4gICAgbW92dG8ucHVudG9zUHJvbWVyaWNhICAgICA9IG9iamV0b1tcIlBVTlRPU19QUk9NRVJJQ0FcIl07XHJcbiAgICBtb3Z0by5zb2JyZWdpcm8gICAgICAgICAgID0gb2JqZXRvW1wiU09CUkVHSVJPXCJdO1xyXG4gICAgbW92dG8uZmluYW5jaWFtaWVudG8gICAgICA9IG9iamV0b1tcIkZJTkFOQ0lBTUlFTlRPXCJdO1xyXG4gICAgbW92dG8ubnVtVGp0YXNBZGljaW9uYWxlcyA9IG9iamV0b1tcIk5VTV9UQVJKRVRBU19BRElDSU9OQUxFU1wiXTtcclxuICAgIG1vdnRvcy5wdXNoKG1vdnRvKTtcclxuICAgIC8vY29uc29sZS5sb2coXCJGZWNoYVBhZ29Db25hdGRvOlwiLG9iamV0b1tcIkZFQ0hBX1BBR09fQ09OVEFET1wiXSk7XHJcbiAgICByZXR1cm4gbW92dG9zO1xyXG4gIH0gXHJcbiAgXHJcbiAgXHJcbn0iXX0=